<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords" content="CareSnap Chatbot">
  <meta name="description" content="">
  <title>Home</title>
  <link rel="stylesheet" href="nicepage.css" media="screen">
  <link rel="stylesheet" href="Home.css" media="screen">
  <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
  <meta name="generator" content="Nicepage 6.5.3, nicepage.com">
  <link id="u-theme-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">



  <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
  <meta name="theme-color" content="#478ac9">
  <meta property="og:title" content="Home">
  <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/">
</head>

<body data-home-page="Home.html" data-home-page-title="Home" data-path-to-root="./" data-include-products="false"
  class="u-body u-xl-mode" data-lang="en">
  <header class="u-clearfix u-custom-color-1 u-header u-header" id="sec-b140" data-animation-name=""
    data-animation-duration="0" data-animation-delay="0" data-animation-direction="">
    <div
      class="u-clearfix u-sheet u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-sheet-1">
      <h1 class="u-text u-text-default u-text-1">CareSnap Chatbot</h1>
      <img class="u-hidden-md u-hidden-sm u-hidden-xs u-image u-image-contain u-image-default u-image-1"
        src="images/bot.png" alt="" data-image-width="482" data-image-height="518">
      <nav class="u-menu u-menu-one-level u-offcanvas u-menu-1">
        <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
          <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
            href="#">
            <svg class="u-svg-link" viewBox="0 0 24 24">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
            </svg>
            <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px"
              xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
              <g>
                <rect y="1" width="16" height="2"></rect>
                <rect y="7" width="16" height="2"></rect>
                <rect y="13" width="16" height="2"></rect>
              </g>
            </svg>
          </a>
        </div>
        <div class="u-custom-menu u-nav-container">
          <ul class="u-nav u-unstyled u-nav-1">
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="Home.html" style="padding: 10px 20px;">Home</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                href="About.html" style="padding: 10px 20px;">About</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                style="padding: 10px 20px;">Instructions</a>
            </li>
            <li class="u-nav-item"><a
                class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base"
                style="padding: 10px 20px;">Chatbot testing</a>
            </li>
          </ul>
        </div>
        <div class="u-custom-menu u-nav-container-collapse">
          <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
            <div class="u-inner-container-layout u-sidenav-overflow">
              <div class="u-menu-close"></div>
              <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2">
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html">Home</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html">About</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link">Instructions</a>
                </li>
                <li class="u-nav-item"><a class="u-button-style u-nav-link">Chatbot testing</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
        </div>
      </nav>
    </div>
  </header>
  <section class="u-clearfix u-section-1" id="sec-4192">
    <div class="u-clearfix u-sheet u-sheet-1"></div>
  </section>

  <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-e372">
    <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
      <p class="u-small-text u-text u-text-variant u-text-1">@‚Äã2024 CareSnap Chatbot. All rights reserved.</p>
    </div>
  </footer>

  <!-- Container for Chatbot Icon and Chat Container -->
  <div id="chat-container-wrapper"
    style="position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column-reverse; align-items: flex-end;">

    <!-- Chat Container -->
    <div id="chat-container"
      style="display: none; max-width: 400px; background-color: #fff; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); overflow: hidden; border-radius: 8px; z-index: 1;">
      <div id="chat-history"></div>
      <form id="user-input-form">
        <input type="text" id="user-input" placeholder="Type your message...">
        <button type="button" onclick="sendMessage()">Send</button>
      </form>
    </div>

    <!-- Chatbot Icon -->
    <div id="chat-icon" style="cursor: pointer; font-size: 24px; z-index: 2;" onclick="toggleChat()">
      üó®Ô∏è <!-- You can replace this with an actual chat bubble icon or an image -->
    </div>

  </div>

  <script>
    function toggleChat() {
      const chatContainer = document.getElementById('chat-container');
      chatContainer.style.display = (chatContainer.style.display === 'none' || chatContainer.style.display === '') ? 'block' : 'none';
    }

    document.addEventListener('DOMContentLoaded', function () {
      // Display welcome message
      const chatHistory = document.getElementById('chat-history');
      const welcomeMessageDiv = document.createElement('div');
      welcomeMessageDiv.className = 'message bot-message';
      welcomeMessageDiv.innerHTML = `<div class="bubble">Welcome I am CareSnap, a chatbot that supports Patient Summary and e-Prescription! Do you want to log in? (yes/no)</div>`;
      chatHistory.appendChild(welcomeMessageDiv);
    });

    function sendMessage() {
      const userMessage = document.getElementById('user-input').value;
      if (userMessage.trim() === '') {
        return;
      }

      // Display user message
      const chatHistory = document.getElementById('chat-history');
      const userMessageDiv = document.createElement('div');
      userMessageDiv.className = 'message user-message';
      userMessageDiv.innerHTML = `<div class="bubble">${userMessage}</div>`;
      chatHistory.appendChild(userMessageDiv);

      <!-- Display loading animation -->
      const loadingMessageDiv = document.createElement('div');
      loadingMessageDiv.className = 'message bot-message';
      loadingMessageDiv.innerHTML = `<div class="loading-animation"></div>`;
      chatHistory.appendChild(loadingMessageDiv);

      // Add a slight delay to ensure the loading animation is displayed
      setTimeout(() => {
        // Make AJAX request to Flask server
        fetch('http://127.0.0.1:5000/chat', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          credentials: 'same-origin',
          body: JSON.stringify({ 'message': userMessage }),
        })
          .then(response => response.json())
          .then(data => {
            // Remove loading animation
            chatHistory.removeChild(loadingMessageDiv);

            // Display bot response
            const botMessageDiv = document.createElement('div');
            botMessageDiv.className = 'message bot-message';
            botMessageDiv.innerHTML = `<div class="bubble">${data.response}</div>`;
            chatHistory.appendChild(botMessageDiv);

            // Scroll to the bottom to show the latest messages
            chatHistory.scrollTop = chatHistory.scrollHeight;
          })
          .catch(error => {
            // Remove loading animation on error
            chatHistory.removeChild(loadingMessageDiv);

            console.error('Error:', error);
          });
      }, 35); // Adjust the delay as needed


      // Clear user input
      document.getElementById('user-input').value = '';
    }
  </script>

</body>

</html>