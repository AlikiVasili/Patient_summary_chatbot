<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="keywords" content="CareSnap Chatbot">
  <meta name="description" content="">
  <title>Home</title>
  <link rel="stylesheet" href="nicepage.css" media="screen">
  <link rel="stylesheet" href="Home.css" media="screen">
  <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
  <meta name="generator" content="Nicepage 6.5.3, nicepage.com">
  <link id="u-theme-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">



  <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
  <meta name="theme-color" content="#478ac9">
  <meta property="og:title" content="Home">
  <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/">
</head>

<body data-home-page-title="Home" data-path-to-root="./" data-include-products="false" class="u-body u-xl-mode"
  data-lang="en">
  <header class="u-clearfix u-custom-color-1 u-header u-header" id="sec-b140" data-animation-name=""
    data-animation-duration="0" data-animation-delay="0" data-animation-direction="">
    <div class="u-clearfix u-sheet u-sheet-1">
      <img class="custom-expanded u-image u-image-contain u-image-default u-preserve-proportions u-image-1"
        src="images/chat-bot_13888994.png" alt="" data-image-width="512" data-image-height="512">
      <h1 class="u-text u-text-default u-text-1">CareSnap Chatbot</h1>
    </div>
  </header>
  <section class="u-align-center u-clearfix u-section-1" id="sec-8d0d">
    <div class="u-clearfix u-sheet u-valign-top u-sheet-1">
      <div class="u-expanded-width u-tab-links-align-left u-tabs u-tabs-1">
        <ul class="u-spacing-10 u-tab-list u-unstyled" role="tablist">
          <li class="u-tab-item u-tab-item-1" role="presentation"><a
              class="active u-active-grey-10 u-button-style u-tab-link u-text-active-black u-text-black u-tab-link-1"
              id="link-tab-14b7" href="#tab-14b7" role="tab" aria-controls="tab-14b7" aria-selected="true">About</a>
          </li>
          <li class="u-tab-item u-tab-item-2" role="presentation"><a
              class="u-active-grey-10 u-button-style u-tab-link u-text-active-black u-text-black u-tab-link-2"
              id="link-tab-0da5" href="#tab-0da5" role="tab" aria-controls="tab-0da5"
              aria-selected="false">Instructions</a>
          </li>
          <li class="u-tab-item" role="presentation"><a
              class="u-active-grey-10 u-button-style u-tab-link u-text-active-black u-text-black u-tab-link-3"
              id="link-tab-2917" href="#tab-2917" role="tab" aria-controls="tab-2917" aria-selected="false">Test
              User</a>
          </li>
          <li class="u-tab-item u-tab-item-4" role="presentation"><a
              class="u-active-grey-10 u-button-style u-tab-link u-text-active-black u-text-black u-tab-link-4"
              id="tab-6e5a" href="#link-tab-6e5a" role="tab" aria-controls="link-tab-6e5a"
              aria-selected="false">Questionaire</a>
          </li>
          <li class="u-tab-item u-tab-item-4" role="presentation"><a
              class="u-active-grey-10 u-button-style u-tab-link u-text-active-black u-text-black u-tab-link-4"
              id="tab-6e5a" href="#link-tab-1111" role="tab" aria-controls="link-tab-6e5a"
              aria-selected="false">Feedback</a>
          </li>
        </ul>
        <div class="u-tab-content">
          <div class="u-align-left u-container-style u-grey-10 u-tab-active u-tab-pane u-tab-pane-1" id="tab-14b7"
            role="tabpanel" aria-labelledby="link-tab-14b7">
            <div class="u-container-layout u-container-layout-1">
              <h5 class="u-text u-text-default u-text-1">Description</h5>
              <div class="u-border-3 u-border-grey-dark-1 u-expanded-width u-line u-line-horizontal u-line-1"></div>
              <p class="u-text u-text-default u-text-2"> Chatbots have gained popularity in recent years,
                especially in the healthcare sector, due to their ability to improve patient engagement and
                satisfaction.
                We present the implementation of a chatbot for a healthcare system that depicts patient summary based on
                the European guidelines.
                The chatbot we created provides patients and doctors with information regarding medical history,
                medications,
                allergies, and vaccinations.
                Our findings suggest that the chatbot is a useful tool that can improve patient engagement,
                reduce wait times, and improve overall healthcare delivery.
                <br><br>This page was created in order to test this chatbot and find weakness and limitations in order
                to update it and improve it.
              </p>
              <p><br> * Have in mind that the convarsations are being saved in order to track issues and observe common patterns in the questions in order to improve the understanding of the chatbot.</p>
            </div>
          </div>
          <div class="u-container-style u-grey-10 u-tab-pane u-tab-pane-2" id="tab-0da5" role="tabpanel"
            aria-labelledby="link-tab-0da5">
            <div class="u-container-layout u-valign-top u-container-layout-2">
              <h5 class="u-text u-text-default u-text-3">Instruction for testing the chatbot</h5>
              <div class="u-border-3 u-border-grey-dark-1 u-expanded-width u-line u-line-horizontal u-line-2"></div>
              <p class="u-text u-text-default u-text-4">
                The chatbot is able to answer genaral questions for patient summary. <br><br>
                Try the chatbot: <br>
                1) copy the id provided in the Test User <br>
                2) open the chatbot that is at the right bottom corner of the page <br>
                3) paste the id in the convarsation and press "Login" <br>
                4) now you can make a convarsation with the chatbot as you want
              </p>
            </div>
          </div>
          <div class="u-container-style u-grey-10 u-tab-pane u-tab-pane-3" id="tab-2917" role="tabpanel"
            aria-labelledby="link-tab-2917">
            <div class="u-container-layout u-container-layout-3">
              <h4 class="u-text u-text-default u-text-5">Lets try the chatbot!</h4>
              <p class="u-text u-text-default u-text-6">You can try using the chatbot by provide the id:
                Identity-M1-1111 <br><br> By using this id you will login as Maria Iosif the test user that was built
                for testing purposes.</break>
              </p>
              <p><br> * Have in mind that the convarsation is being saved in order to track issues and observe common patterns in the questions in order to improve the understanding of the chatbot.</p>
            </div>
          </div>
          <div class="u-container-style u-grey-10 u-tab-pane u-tab-pane-4" id="link-tab-6e5a" role="tabpanel"
            aria-labelledby="tab-6e5a">
            <div class="u-container-layout u-container-layout-4">
              <p class="u-text u-text-default u-text-7">If you try the chatbot please complete the Questionaire. Your
                feedback will be very useful!</p>
              <a href="https://forms.gle/9B4XHx4dFvzatpPG7" class="u-btn u-button-style u-btn-1">
                <span class="u-text-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                    xml:space="preserve" class="u-svg-content" viewBox="0 0 512 512" x="0px" y="0px"
                    style="width: 1em; height: 1em;">
                    <g>
                      <g>
                        <g>
                          <path
                            d="M491.422,138.859c-13.008-26.609-32.129-49.151-56.831-66.999C390.803,40.221,329.047,23.5,256,23.5     S121.197,40.221,77.409,71.859c-24.702,17.848-43.823,40.39-56.831,66.999C6.924,166.791,0,199.305,0,235.5     c0,78.285,32.285,138.172,93.614,174.195c-8.483,29.931-19.492,48.07-19.591,48.231l-18.984,30.521l35.956,0.053H91.1     c0.104,0.001,0.208,0.001,0.319,0.001c11.347,0,63.406-2.448,105.735-44.91c18.66,2.596,38.403,3.909,58.846,3.909     c73.047,0,134.803-16.723,178.591-48.36c24.702-17.848,43.823-40.39,56.831-66.999C505.076,304.208,512,271.693,512,235.5     C512,199.305,505.076,166.791,491.422,138.859z M411.164,366.716C374.237,393.396,320.583,407.5,256,407.5     c-22.19,0-43.364-1.686-62.935-5.009l-11.135-1.891l-7.369,8.559c-15.834,18.391-34.114,28.21-49.632,33.439     c4.03-10.872,8.111-23.919,11.404-38.786l3.394-15.32l-14.072-6.941C68.818,353.515,40,304.375,40,235.5     c0-57.903,20.468-102.051,60.836-131.217C137.763,77.602,191.417,63.5,256,63.5s118.237,14.103,155.164,40.783     C451.532,133.448,472,177.596,472,235.5S451.532,337.549,411.164,366.716z">
                          </path>
                          <rect x="236" y="327.5" width="40" height="40"></rect>
                          <path
                            d="M264.01,105.994c-22.998-2.518-45.895,4.748-62.838,19.936C184.539,140.839,175,162.187,175,184.5h40     c0-11.122,4.571-21.346,12.871-28.786c8.616-7.724,19.905-11.261,31.781-9.958c18.319,2.008,33.077,16.6,35.093,34.699     c1.622,14.574-4.888,28.78-16.991,37.072C250.983,235.87,235,265.766,235,297.5h40c0-18.534,9.481-36.094,25.363-46.975     c24.317-16.662,37.397-45.207,34.136-74.497C330.429,139.477,300.784,110.023,264.01,105.994z">
                          </path>
                        </g>
                      </g>
                    </g>
                  </svg>
                </span>&nbsp;Questionaire
              </a>
            </div>
          </div>
          <div class="u-container-style u-grey-10 u-tab-pane u-tab-pane-3" id="link-tab-1111" role="tabpanel"
            aria-labelledby="link-tab-1111">
            <section style="width: 100%;" class="u-align-center u-clearfix u-section-2" id="feedback-section">
              <div class="u-container-layout u-container-layout-1">
                <h5 class="u-text u-text-default u-text-1">Feedback</h5>
                <div class="u-border-3 u-border-grey-dark-1 u-expanded-width u-line u-line-horizontal u-line-3"></div>
                <br>
                <form id="feedback-form" class="u-form-custom">
                  <div class="u-form-group u-form-name">
                    <label for="feedback-type" class="u-label">Feedback Type:</label>
                    <select id="feedback-type" name="feedback-type" class="u-form-control u-select">
                      <option value="comments">Comments</option>
                      <option value="suggestions">Suggestions</option>
                      <option value="problems">Report Problems</option>
                    </select>
                    <div class="u-form-group u-form-message">
                      <label for="feedback-message" class="u-label">Your Feedback:</label>
                      <br>
                      <textarea style="width: 100%;" id="feedback-message" name="feedback-message"
                        class="u-form-control u-textarea" rows="4" placeholder="Type your feedback here..."></textarea>
                    </div>

                    <div class="u-align-center u-form-group u-form-submit">
                      <button type="button" class="u-btn u-button-style u-btn-1" onclick="submitFeedback()">Submit
                        Feedback</button>
                    </div>
                </form>
              </div>
            </section>
          </div>

        </div>
      </div>
  </section>



  <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-e372">
    <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
      <p class="u-small-text u-text u-text-variant u-text-1">@​2024 CareSnap Chatbot. All rights reserved.</p>
    </div>
  </footer>

  <!-- Container for Chatbot Icon and Chat Container -->
  <div id="chat-container-wrapper"
    style="position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column-reverse; align-items: flex-end;">

    <!-- Chat Container -->
    <div id="chat-container"
      style="display: none; max-width: 500px; background-color: #fff; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); overflow: hidden; border-radius: 8px; z-index: 1;">
      <div id="chat-history"></div>
      <form id="login-form">
        <input type="text" id="patient-id" placeholder="Please enter you ID..." required>
        <button type="button" onclick="submitLoginForm()">Login</button>
      </form>
      <form id="user-input-form">
        <input type="text" id="user-input" style="display: none;" placeholder="Type your message..." disabled>
        <button type="button" id="send-button" style="display: none;" onclick="sendMessage()">Send</button>
      </form>
    </div>

    <!-- Chatbot Icon -->
    <div id="chat-icon" style="cursor: pointer; font-size: 24px; z-index: 2;" onclick="toggleChat()">
      🗨️ <!-- You can replace this with an actual chat bubble icon or an image -->
    </div>

  </div>

  <script>
    function submitFeedback() {
      const feedbackType = document.getElementById('feedback-type').value;
      const feedbackMessage = document.getElementById('feedback-message').value;

      // Make AJAX request to Flask server
      fetch('http://127.0.0.1:5000/chat', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          credentials: 'same-origin',
          body: JSON.stringify({ 'message': "CSV " + feedbackType + " " + feedbackMessage}),
        })

      // Optionally, you can provide a thank you message or close the feedback form
      alert('Thank you for your feedback!');
    }

    function submitLoginForm() {
      const patientId = document.getElementById('patient-id').value;

      // You can replace the following line with your logic to call the chatbot and find the Patient Summary
      getPatientSummary(patientId);
    }

    // Replace this function with your actual logic to fetch Patient Summary from the chatbot
    function getPatientSummary(patientId) {
      const chatHistory = document.getElementById('chat-history');
      const chatHistoryLogIn = document.getElementById('login-form');

      const loadingMessageDiv = document.createElement('div');
      loadingMessageDiv.className = 'message bot-message';
      loadingMessageDiv.innerHTML = `<div class="loading-animation"></div>`;
      chatHistory.appendChild(loadingMessageDiv);

      // Add a slight delay to ensure the loading animation is displayed
      setTimeout(() => {
        // Make AJAX request to Flask server
        fetch('http://127.0.0.1:5000/chat', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          credentials: 'same-origin',
          body: JSON.stringify({ 'message': "CY/" + patientId }),
        })
          .then(response => response.json())
          .then(data => {
            // Remove loading animation
            chatHistory.removeChild(loadingMessageDiv);

            if (data.response !== null) {
              // Display bot response
              const botMessageDiv = document.createElement('div');
              botMessageDiv.className = 'message bot-message';
              botMessageDiv.innerHTML = `<div class="bubble">${data.response}</div>`;
              chatHistory.appendChild(botMessageDiv);

              // Scroll to the bottom to show the latest messages
              chatHistory.scrollTop = chatHistory.scrollHeight;

              if (data.response.includes("wrong")) {
                print("wrong")
              }
              else {
                // Enable the input field after successful login
                document.getElementById('user-input').style.display = 'block';
                document.getElementById('user-input').disabled = false;

                // Show the send button after successful login
                document.getElementById('send-button').style.display = 'block';

                // Hide the login form after successful login
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('patient-id').value = ''
              }

            } else {
              // Display login failure message in the chatbot
              const loginFailureMessageDiv = document.createElement('div');
              loginFailureMessageDiv.className = 'message bot-message';
              loginFailureMessageDiv.innerHTML = `<div class="bubble">Login failed. Please check your Patient ID and try again.
  </div>`;
              chatHistory.appendChild(loginFailureMessageDiv);

              // Scroll to the bottom to show the latest messages
              chatHistory.scrollTop = chatHistory.scrollHeight;

              // You can add additional logic or display an error message as needed
            }
          })
          .catch(error => {
            // Remove loading animation on error
            chatHistory.removeChild(loadingMessageDiv);

            console.error('Error:', error);
          });
      }, 35); // Adjust the delay as needed
    }

    document.getElementById("user-input-form").addEventListener("keydown", function (event) {
      // Check if the pressed key is "Enter" (key code 13)
      if (event.key === "Enter") {
        // Prevent the default form submission behavior
        event.preventDefault();

        // Call the sendMessage() function
        sendMessage();
      }
    });

    function toggleChat() {
      const chatContainer = document.getElementById('chat-container');
      chatContainer.style.display = (chatContainer.style.display === 'none' || chatContainer.style.display === '') ? 'block'
        : 'none';
    }

    function sendMessage() {
      const userMessage = document.getElementById('user-input').value;
      if (userMessage.trim() === '') {
        return;
      }

      // Display user message
      const chatHistory = document.getElementById('chat-history');
      const userMessageDiv = document.createElement('div');
      userMessageDiv.className = 'message user-message';
      userMessageDiv.innerHTML = `<div class="bubble">${userMessage}</div>`;
      chatHistory.appendChild(userMessageDiv);

      <!-- Display loading animation -->
      const loadingMessageDiv = document.createElement('div');
      loadingMessageDiv.className = 'message bot-message';
      loadingMessageDiv.innerHTML = `<div class="loading-animation"></div>`;
      chatHistory.appendChild(loadingMessageDiv);

      // Add a slight delay to ensure the loading animation is displayed
      setTimeout(() => {
        // Make AJAX request to Flask server
        fetch('http://127.0.0.1:5000/chat', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          credentials: 'same-origin',
          body: JSON.stringify({ 'message': userMessage }),
        })
          .then(response => response.json())
          .then(data => {
            // Remove loading animation
            chatHistory.removeChild(loadingMessageDiv);

            // Display bot response
            const botMessageDiv = document.createElement('div');
            botMessageDiv.className = 'message bot-message';
            botMessageDiv.innerHTML = `<div class="bubble">${data.response.replace(/\n/g, '<br>')}</div>`;
            chatHistory.appendChild(botMessageDiv);

            // Scroll to the bottom to show the latest messages
            chatHistory.scrollTop = chatHistory.scrollHeight;

            // Check if data.response is equal to the specific string
            if (data.response.includes("Bye")) {
              // Log the response to the console for troubleshooting
              console.log('Response:', data.response);
              // Take specific action when the condition is met
              // For example, reset the session or perform any other action
              document.getElementById('user-input').disabled = true;
              document.getElementById('user-input').style.display = 'none';
              document.getElementById('send-button').style.display = 'none';
              // Display the hidden login form
              document.getElementById('login-form').style.display = 'block';
              chatHistory.innerHTML = ''; // Clear chat history
            }
          })
          .catch(error => {
            // Remove loading animation on error
            chatHistory.removeChild(loadingMessageDiv);

            console.error('Error:', error);
          });
      }, 35); // Adjust the delay as needed


      // Clear user input
      document.getElementById('user-input').value = '';
    }
  </script>

</body>

</html>